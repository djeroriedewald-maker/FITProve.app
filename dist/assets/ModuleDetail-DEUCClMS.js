import{r as c,d as M,j as e,e as T,_ as L,L as y}from"./index-BZn6MCEi.js";import{p as V}from"./assets-lhZkEq0c.js";import $ from"./index-CBWk-r3W.js";import"./WorkoutCard-BCFfZEe3.js";const v="https://jajfjspotcwxllkeuysn.supabase.co/storage/v1/object/public/workouts/v20250906";async function E(r){const d=await fetch(r,{headers:{"cache-control":"no-cache"}});if(!d.ok)throw new Error(`HTTP ${d.status} @ ${r}`);return await d.json()}function q({children:r}){return e.jsx("span",{className:"inline-flex items-center rounded-md border border-zinc-300/70 dark:border-zinc-700 px-2 py-0.5 text-xs text-zinc-700 dark:text-zinc-300",children:r})}function O(){const[r,d]=c.useState(null),[u,o]=c.useState(null),[x,n]=M(),i=x.get("q")??"",g=x.get("equipment")??"all",m=x.get("hasVideo")==="1",[p,S]=c.useState(i),[h,C]=c.useState(g),[k,_]=c.useState(m);c.useEffect(()=>{let s=!0;async function t(){try{const a=await E(`${v}/manifest.json`),f=Array.from({length:a.chunks},(l,j)=>`${v}/chunk-${String(j).padStart(3,"0")}.json`),b=[];for(const l of f){const j=await E(l);b.push(...j)}s&&d(b)}catch(a){console.error(a),s&&(o((a==null?void 0:a.message)||"Kon de workout library niet laden."),d([]))}}return t(),()=>{s=!1}},[]),c.useEffect(()=>{const s=new URLSearchParams(x);p?s.set("q",p):s.delete("q"),h&&h!=="all"?s.set("equipment",h):s.delete("equipment"),k?s.set("hasVideo","1"):s.delete("hasVideo"),n(s,{replace:!0})},[p,h,k,x,n]);const A=c.useMemo(()=>{const s=new Set;return(r??[]).forEach(t=>t.equipment.forEach(a=>s.add(a))),["all",...Array.from(s).sort((t,a)=>t.localeCompare(a))]},[r]),N=c.useMemo(()=>{const s=r??[],t=p.trim().toLowerCase();return s.filter(a=>{var j,w;const f=h==="all"?!0:a.equipment.some(z=>z===h),b=t.length===0?!0:a.name.toLowerCase().includes(t)||(a.category??"").toLowerCase().includes(t)||a.primaryMuscles.some(z=>z.toLowerCase().includes(t))||(a.secondaryMuscles??[]).some(z=>z.toLowerCase().includes(t)),l=k?(((w=(j=a.media)==null?void 0:j.videos)==null?void 0:w.length)??0)>0:!0;return f&&b&&l})},[r,p,h,k]);return e.jsxs("div",{className:"px-4 py-4",id:"start",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Oefeningen"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto flex-wrap",children:[e.jsx("input",{value:p,onChange:s=>S(s.target.value),placeholder:"Zoek oefeningen...",className:"flex-1 sm:w-64 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-1.5 text-sm","aria-label":"Zoeken"}),e.jsx("select",{value:h,onChange:s=>C(s.target.value),className:"text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-transparent px-2 py-1.5","aria-label":"Filter op materiaal",children:A.map(s=>e.jsx("option",{value:s,children:s==="all"?"Alle equipment":s},s))}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm px-2 py-1.5 rounded-lg border border-zinc-300 dark:border-zinc-700 cursor-pointer select-none",title:"Toon alleen oefeningen met video",children:[e.jsx("input",{type:"checkbox",className:"accent-orange-500",checked:k,onChange:s=>_(s.target.checked),"aria-label":"Alleen met video"}),"Alleen met video"]})]})]}),e.jsxs("ul",{className:"mt-4 space-y-3",children:[r===null&&Array.from({length:6}).map((s,t)=>e.jsxs("li",{className:"animate-pulse rounded-xl border border-zinc-200 dark:border-zinc-800 p-4 bg-white/50 dark:bg-zinc-900/50",children:[e.jsx("div",{className:"h-4 w-1/3 bg-zinc-200 dark:bg-zinc-800 rounded"}),e.jsx("div",{className:"mt-2 h-3 w-1/4 bg-zinc-200 dark:bg-zinc-800 rounded"}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("div",{className:"h-5 w-16 bg-zinc-200 dark:bg-zinc-800 rounded"}),e.jsx("div",{className:"h-5 w-20 bg-zinc-200 dark:bg-zinc-800 rounded"})]})]},t)),r!==null&&u&&e.jsx("li",{className:"text-sm text-red-600 dark:text-red-400",children:u}),r!==null&&!u&&N.slice(0,100).map(s=>{var t,a,f,b;return e.jsx("li",{className:"rounded-xl border border-zinc-200 dark:border-zinc-800 p-4 bg-white/70 dark:bg-zinc-900/60 backdrop-blur",children:e.jsxs("div",{className:"flex items-center gap-3",children:[(t=s.media)!=null&&t.thumbnail?e.jsx("img",{src:s.media.thumbnail,alt:"",loading:"lazy",className:"h-14 w-14 rounded-lg object-cover border border-zinc-200 dark:border-zinc-800",onError:l=>{l.currentTarget.style.display="none"}}):null,e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-zinc-600 dark:text-zinc-400 mt-0.5",children:[s.primaryMuscles.join(", "),s.category?` • ${s.category}`:"",(((f=(a=s.media)==null?void 0:a.videos)==null?void 0:f.length)??0)>0?" • 🎥 video":""]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[s.equipment.slice(0,2).map(l=>e.jsx(q,{children:l},l)),(b=s.secondaryMuscles)==null?void 0:b.slice(0,2).map(l=>e.jsx(q,{children:l},l))]})]}),e.jsx("button",{type:"button",className:"text-sm px-3 py-1.5 rounded-lg border border-orange-500/30 text-orange-600 dark:text-orange-400 hover:bg-orange-500/10",onClick:()=>{alert(`Start: ${s.name}`)},children:"Start"})]})},s.id)}),(r==null?void 0:r.length)===0&&!u&&e.jsx("li",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Geen oefeningen gevonden."}),r&&N.length===0&&!u&&e.jsx("li",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Geen resultaten voor je filters."})]}),e.jsxs("p",{className:"mt-6 text-[11px] text-zinc-500 dark:text-zinc-500",children:["Dataset geladen vanaf VITE_WORKOUTS_BASE (",v,"). We tonen een subset (max 100) voor performance; zoek/filters vernauwen de lijst."]})]})}function U(){const{slug:r}=T();if(r==="workouts")return e.jsx($,{});const[d,u]=c.useState(null);c.useEffect(()=>{let n=!0;return L(()=>import("./modules-BWKfwYbu.js"),[]).then(i=>{n&&u(i.default)}).catch(i=>{console.error("Failed to load modules.json",i),n&&u([])}),()=>{n=!1}},[]);const o=c.useMemo(()=>(d??[]).find(n=>n.slug===r),[d,r]);if(d===null)return e.jsxs("section",{className:"px-0 pb-8",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"h-48 md:h-64 w-full bg-zinc-200 dark:bg-zinc-800 animate-pulse"})}),e.jsxs("div",{className:"px-4 mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-6 w-1/2 bg-zinc-200 dark:bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-2/3 bg-zinc-200 dark:bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-24 bg-zinc-200 dark:bg-zinc-800 rounded animate-pulse"})]}),e.jsx("div",{className:"h-48 bg-zinc-200 dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-800 animate-pulse"})]})]});if(!o)return e.jsxs("section",{className:"px-4 py-4 md:py-6",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Module niet gevonden"}),e.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Controleer de URL of ga terug naar het overzicht."}),e.jsx(y,{to:"/modules",className:"inline-block mt-4 text-sm rounded-lg px-3 py-2 border border-zinc-300 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-800",children:"← Terug naar modules"})]});const x=n=>{if(!n)return{primary:void 0,fallback:void 0};const{primary:i,fallback:g}=V(n);return{primary:i,fallback:g}};return e.jsxs("section",{className:"px-0 pb-8",children:[e.jsxs("div",{className:"relative",children:[(()=>{const{primary:n,fallback:i}=x(o.hero);return e.jsx("img",{src:n,alt:`${o.title} hero`,className:"h-48 md:h-64 w-full object-cover",loading:"lazy",decoding:"async",draggable:!1,onError:g=>{const m=g.currentTarget;i&&m.src!==i?m.src=i:m.src="/images/hero.svg"}})})(),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-transparent"}),e.jsxs("div",{className:"absolute bottom-3 left-4 right-4",children:[e.jsx("h1",{className:"text-white text-2xl md:text-3xl font-bold drop-shadow",children:o.title}),e.jsx("p",{className:"text-white/90 text-sm md:text-base drop-shadow",children:o.description})]})]}),e.jsxs("div",{className:"px-4 mt-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx(y,{to:"/modules",className:"inline-block text-sm rounded-lg px-3 py-2 border border-zinc-300 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-800",children:"← Terug naar modules"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white/70 dark:bg-zinc-900/60 backdrop-blur",children:o.slug==="workout"?e.jsx(O,{}):e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Inhoud volgt"}),e.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Deze module krijgt binnenkort zijn specifieke componenten en flows."})]})}),e.jsxs("aside",{className:"rounded-2xl border border-zinc-200 dark:border-zinc-800 p-4 bg-white/70 dark:bg-zinc-900/60 backdrop-blur",children:[e.jsx("h3",{className:"text-base font-semibold",children:"Over deze module"}),e.jsx("p",{className:"mt-1 text-sm text-zinc-600 dark:text-zinc-400",children:o.description}),e.jsx("div",{className:"mt-4 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:(()=>{const{primary:n,fallback:i}=x(o.image);return e.jsx("img",{src:n,alt:`${o.title} visual`,className:"w-full h-28 object-cover",loading:"lazy",decoding:"async",draggable:!1,onError:g=>{const m=g.currentTarget;i&&m.src!==i?m.src=i:m.src="/images/hero.svg"}})})()})]})]})]})]})}export{U as default};
