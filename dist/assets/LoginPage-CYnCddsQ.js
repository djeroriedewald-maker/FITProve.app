import{r as n,a as I,b as L,s as o,j as e,L as P}from"./index-BZn6MCEi.js";const O=()=>{var f,j;const[r,m]=n.useState("login"),[l,N]=n.useState(""),[i,v]=n.useState(""),[c,d]=n.useState(!1),[b,u]=n.useState(null),h=I(),x=L(),g=new URLSearchParams(x.search).get("redirect")||((j=(f=x.state)==null?void 0:f.from)==null?void 0:j.pathname)||"/modules",y="https://fitprove.app/images/modules/loginpage.webp",p="/images/loginpage.webp";n.useEffect(()=>{let s=!0;return o.auth.getUser().then(({data:t})=>{s&&t.user&&h(g,{replace:!0})}),()=>{s=!1}},[h,g]);const k=typeof o.auth.signInWithPassword=="function",C=typeof o.auth.signInWithOAuth=="function";async function E(s){s.preventDefault(),d(!0),u(null);try{if(r==="login"){if(k){const{error:t}=await o.auth.signInWithPassword({email:l,password:i});if(t)throw t}else{const{error:t}=await o.auth.signIn({email:l,password:i});if(t)throw t}h(g,{replace:!0})}else{const{error:t}=await o.auth.signUp({email:l,password:i});if(t)throw t;h(g,{replace:!0})}}catch(t){u((t==null?void 0:t.message)??"Inloggen mislukt.")}finally{d(!1)}}async function w(s){d(!0),u(null);const t=`${window.location.origin}/`;try{if(C){const{error:a}=await o.auth.signInWithOAuth({provider:s,options:{redirectTo:t}});if(a)throw a}else{const{error:a}=await o.auth.signIn({provider:s},{redirectTo:t});if(a)throw a}}catch(a){u((a==null?void 0:a.message)??"OAuth inloggen mislukt."),d(!1)}}return e.jsxs("div",{className:"relative min-h-screen text-white",children:[e.jsx("img",{src:y,alt:"Coach Tai login achtergrond",className:"absolute inset-0 w-full h-full object-cover",onError:s=>{const t=s.currentTarget;t.src!==p?t.src=p:t.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-black/70"}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-white/10 bg-black/60 backdrop-blur p-6",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 rounded-2xl bg-orange-500"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Coach Tai"}),e.jsx("p",{className:"text-white/70 mt-1",children:"“Even inchecken en we gaan knallen. Ik hou je voortgang bij.”"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsx("button",{type:"button",className:`py-2 rounded-xl font-semibold ${r==="login"?"bg-white text-black":"bg-white/10 text-white hover:bg-white/20"}`,onClick:()=>m("login"),"aria-pressed":r==="login",children:"Inloggen"}),e.jsx("button",{type:"button",className:`py-2 rounded-xl font-semibold ${r==="signup"?"bg-white text-black":"bg-white/10 text-white hover:bg-white/20"}`,onClick:()=>m("signup"),"aria-pressed":r==="signup",children:"Account maken"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm text-white/80",children:"E-mail"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:s=>N(s.target.value),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 outline-none focus:border-orange-500",placeholder:"jij@example.nl",autoComplete:"email",inputMode:"email"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Wachtwoord"}),e.jsx("input",{type:"password",required:!0,value:i,onChange:s=>v(s.target.value),className:"mt-1 w-full rounded-xl border border-white/10 bg-black/40 px-3 py-2 outline-none focus:border-orange-500",placeholder:"●●●●●●●●",autoComplete:r==="login"?"current-password":"new-password",minLength:6})]}),b&&e.jsx("div",{className:"rounded-lg bg-red-500/20 border border-red-500/30 text-red-200 px-3 py-2 text-sm",children:b}),e.jsx("button",{type:"submit",disabled:c,className:"w-full py-2 rounded-xl bg-orange-500 text-black font-semibold hover:bg-orange-400 disabled:opacity-60",children:c?"Bezig…":r==="login"?"Log in":"Maak account"})]}),e.jsxs("div",{className:"my-4 flex items-center gap-3",children:[e.jsx("div",{className:"h-px flex-1 bg-white/10"}),e.jsx("span",{className:"text-xs text-white/60",children:"of"}),e.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>w("google"),className:"py-2 rounded-xl bg-white text-black font-semibold hover:bg-white/90",disabled:c,children:"Google"}),e.jsx("button",{onClick:()=>w("apple"),className:"py-2 rounded-xl bg-white text-black font-semibold hover:bg-white/90",disabled:c,children:"Apple"})]}),e.jsxs("p",{className:"mt-4 text-center text-xs text-white/60",children:["Door in te loggen ga je akkoord met onze ",e.jsx(P,{to:"#",className:"underline",children:"voorwaarden"}),"."]})]})})]})};export{O as default};
